(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{195:function(t,e,r){},296:function(t,e,r){t.exports=r(297)},297:function(t,e,r){r(298);var i=r(14).Object;t.exports=function(t,e,r){return i.defineProperty(t,e,r)}},298:function(t,e,r){var i=r(31);i(i.S+i.F*!r(5),"Object",{defineProperty:r(11).f})},299:function(t,e,r){"use strict";var i=r(144),n=r(153),s=r(154),a=r(221),l=r(168),o=r(143),u=r(223).f,c=r(222).f,h=r(150).f,f=r(220).trim,v=i.Number,g=v,p=v.prototype,d="Number"==s(r(213)(p)),m="trim"in String.prototype,b=function(t){var e=l(t,!1);if("string"==typeof e&&e.length>2){var r,i,n,s=(e=m?e.trim():f(e,3)).charCodeAt(0);if(43===s||45===s){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===s){switch(e.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+e}for(var a,o=e.slice(2),u=0,c=o.length;u<c;u++)if((a=o.charCodeAt(u))<48||a>n)return NaN;return parseInt(o,i)}}return+e};if(!v(" 0o1")||!v("0b1")||v("+0x1")){v=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof v&&(d?o((function(){p.valueOf.call(r)})):"Number"!=s(r))?a(new g(b(e)),r,v):b(e)};for(var y,w=r(146)?u(g):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;w.length>C;C++)n(g,y=w[C])&&!n(v,y)&&h(v,y,c(g,y));v.prototype=p,p.constructor=v,r(147)(i,"Number",v)}},300:function(t,e,r){"use strict";r(301);var i=r(145),n=r(163),s=r(146),a=/./.toString,l=function(t){r(147)(RegExp.prototype,"toString",t,!0)};r(143)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?l((function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!s&&t instanceof RegExp?n.call(t):void 0)})):"toString"!=a.name&&l((function(){return a.call(this)}))},301:function(t,e,r){r(146)&&"g"!=/./g.flags&&r(150).f(RegExp.prototype,"flags",{configurable:!0,get:r(163)})},302:function(t,e,r){var i=Date.prototype,n=i.toString,s=i.getTime;new Date(NaN)+""!="Invalid Date"&&r(147)(i,"toString",(function(){var t=s.call(this);return t==t?n.call(this):"Invalid Date"}))},303:function(t,e,r){"use strict";var i=r(177),n=r(145),s=r(304),a=r(178),l=r(155),o=r(179),u=r(181),c=r(143),h=Math.min,f=[].push,v=!c((function(){RegExp(4294967295,"y")}));r(180)("split",2,(function(t,e,r,c){var g;return g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return r.call(n,t,e);for(var s,a,l,o=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,v=void 0===e?4294967295:e>>>0,g=new RegExp(t.source,c+"g");(s=u.call(g,n))&&!((a=g.lastIndex)>h&&(o.push(n.slice(h,s.index)),s.length>1&&s.index<n.length&&f.apply(o,s.slice(1)),l=s[0].length,h=a,o.length>=v));)g.lastIndex===s.index&&g.lastIndex++;return h===n.length?!l&&g.test("")||o.push(""):o.push(n.slice(h)),o.length>v?o.slice(0,v):o}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)}:r,[function(r,i){var n=t(this),s=null==r?void 0:r[e];return void 0!==s?s.call(r,n,i):g.call(String(n),r,i)},function(t,e){var i=c(g,t,this,e,g!==r);if(i.done)return i.value;var u=n(t),f=String(this),p=s(u,RegExp),d=u.unicode,m=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(v?"y":"g"),b=new p(v?u:"^(?:"+u.source+")",m),y=void 0===e?4294967295:e>>>0;if(0===y)return[];if(0===f.length)return null===o(b,f)?[f]:[];for(var w=0,C=0,I=[];C<f.length;){b.lastIndex=v?C:0;var k,x=o(b,v?f:f.slice(C));if(null===x||(k=h(l(b.lastIndex+(v?0:C)),f.length))===w)C=a(f,C,d);else{if(I.push(f.slice(w,C)),I.length===y)return I;for(var _=1;_<=x.length-1;_++)if(I.push(x[_]),I.length===y)return I;C=w=k}}return I.push(f.slice(w)),I}]}))},304:function(t,e,r){var i=r(145),n=r(212),s=r(141)("species");t.exports=function(t,e){var r,a=i(t).constructor;return void 0===a||null==(r=i(a)[s])?e:n(r)}},305:function(t,e,r){"use strict";var i=r(195);r.n(i).a},318:function(t,e,r){"use strict";r.r(e);r(164);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=r(296),s=r.n(n);function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(t,i.key,i)}}function l(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}r(299),r(300),r(302),r(219),r(184),r(303);var o={name:"color-change-filter",data:function(){return{startColor:"#000000",endColor:"#ff0033",startInputColor:"#000000",endInputColor:"#ff0033",filterColor:"",errorValue:100,errorMessage:"",Color:{},Solver:{},filter:"",times:0,timer:null}},methods:{initValue:function(){this.errorValue=100,this.errorMessage="",this.times=0,clearInterval(this.timer)},getFilterRules:function(){this.startInputColor=this.startColor,this.endInputColor=this.endColor,this.$nextTick(this.change)},autoGetFilterRules:function(){var t=this;this.times=0,clearInterval(this.timer);setInterval((function(){t.times++,t.times>100&&clearInterval(t.timer),t.getFilterRules()}),0)},change:function(){var t=this,e=this.$refs.start.$el,r=this.$refs.end.$el,i=this.startColor,n=this.endColor,s=document.createElement("canvas"),a=s.getContext("2d");s.width=10,s.height=10;var l=window.getComputedStyle(e).color,o=window.getComputedStyle(r).color,u=l.replace(/\s|[A-Za-z\(\)]/g,"").split(","),c=o.replace(/\s|[A-Za-z\(\)]/g,"").split(","),h=new t.Color(c[0],c[1],c[2]),f=new t.Solver(h);f.reusedColor=new t.Color(u[0],u[1],u[2]);var v=f.solve();colorReal.style.backgroundColor=n,colorFilter.style.backgroundColor=i;var g=new Image;g.onload=function(){a.drawImage(this,0,0);var e=a.getImageData(5,5,1,1),r=e.data[0],i=e.data[1],n=e.data[2],s=Math.sqrt((c[0]-r)*(c[0]-r)+(c[1]-i)*(c[1]-i)+(c[2]-n)*(c[2]-n)),l="";l=0==s?"完美！":s<2?"几乎完美！":s<5?"颜色很接近了。":s<15?"颜色有些许出入，试试重新转换下。":"颜色出入较大，请重新再转一遍。",t.errorValue>s&&(t.errorValue=s,t.errorMessage=l,t.filterColor=t.colorHex("rgb(".concat([r,i,n].join(),")")),t.filter=v.filter)},g.src='data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"><foreignObject width="10" height="10"><body xmlns="http://www.w3.org/1999/xhtml" style="margin:0;width:10px;height:10px;background-color:'+i.replace("#","%23")+";"+v.filter+'"></body></foreignObject></svg>'},colorHex:function(t){var e=t;if(/^(rgb|RGB)/.test(e)){for(var r=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),i="#",n=0;n<r.length;n++){var s=Number(r[n]).toString(16);s.length<2&&(s="0"+s),i+=s}return 7!==i.length&&(i=e),i}if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e)){var a=e.replace(/#/,"").split("");if(6===a.length)return e;if(3===a.length){var l="#";for(n=0;n<a.length;n+=1)l+=a[n]+a[n];return l}}return e},init:function(){var t=this;this.Color=function(){function t(e,r,n){i(this,t),this.set(e,r,n)}return l(t,[{key:"toString",value:function(){return"rgb(".concat(Math.round(this.r),", ").concat(Math.round(this.g),", ").concat(Math.round(this.b),")")}},{key:"set",value:function(t,e,r){this.r=this.clamp(t),this.g=this.clamp(e),this.b=this.clamp(r)}},{key:"hueRotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t=t/180*Math.PI;var e=Math.sin(t),r=Math.cos(t);this.multiply([.213+.787*r-.213*e,.715-.715*r-.715*e,.072-.072*r+.928*e,.213-.213*r+.143*e,.715+.285*r+.14*e,.072-.072*r-.283*e,.213-.213*r-.787*e,.715-.715*r+.715*e,.072+.928*r+.072*e])}},{key:"grayscale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.multiply([.2126+.7874*(1-t),.7152-.7152*(1-t),.0722-.0722*(1-t),.2126-.2126*(1-t),.7152+.2848*(1-t),.0722-.0722*(1-t),.2126-.2126*(1-t),.7152-.7152*(1-t),.0722+.9278*(1-t)])}},{key:"sepia",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.multiply([.393+.607*(1-t),.769-.769*(1-t),.189-.189*(1-t),.349-.349*(1-t),.686+.314*(1-t),.168-.168*(1-t),.272-.272*(1-t),.534-.534*(1-t),.131+.869*(1-t)])}},{key:"saturate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.multiply([.213+.787*t,.715-.715*t,.072-.072*t,.213-.213*t,.715+.285*t,.072-.072*t,.213-.213*t,.715-.715*t,.072+.928*t])}},{key:"multiply",value:function(t){var e=this.clamp(this.r*t[0]+this.g*t[1]+this.b*t[2]),r=this.clamp(this.r*t[3]+this.g*t[4]+this.b*t[5]),i=this.clamp(this.r*t[6]+this.g*t[7]+this.b*t[8]);this.r=e,this.g=r,this.b=i}},{key:"brightness",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.linear(t)}},{key:"contrast",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.linear(t,-.5*t+.5)}},{key:"linear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.r=this.clamp(this.r*t+255*e),this.g=this.clamp(this.g*t+255*e),this.b=this.clamp(this.b*t+255*e)}},{key:"invert",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.r=this.clamp(255*(t+this.r/255*(1-2*t))),this.g=this.clamp(255*(t+this.g/255*(1-2*t))),this.b=this.clamp(255*(t+this.b/255*(1-2*t)))}},{key:"hsl",value:function(){var t,e,r=this.r/255,i=this.g/255,n=this.b/255,s=Math.max(r,i,n),a=Math.min(r,i,n),l=(s+a)/2;if(s===a)t=e=0;else{var o=s-a;switch(e=l>.5?o/(2-s-a):o/(s+a),s){case r:t=(i-n)/o+(i<n?6:0);break;case i:t=(n-r)/o+2;break;case n:t=(r-i)/o+4}t/=6}return{h:100*t,s:100*e,l:100*l}}},{key:"clamp",value:function(t){return t>255?t=255:t<0&&(t=0),t}}]),t}(),this.Solver=function(){function e(r){i(this,e),this.target=r,this.targetHSL=r.hsl(),this.reusedColor=new t.Color(0,0,0)}return l(e,[{key:"solve",value:function(){var t=this.solveNarrow(this.solveWide());return{values:t.values,loss:t.loss,filter:this.css(t.values)}}},{key:"solveWide",value:function(){for(var t=[60,180,18e3,600,1.2,1.2],e={loss:1/0},r=0;e.loss>25&&r<3;r++){var i=this.spsa(5,t,15,[50,20,3750,50,100,100],1e3);i.loss<e.loss&&(e=i)}return e}},{key:"solveNarrow",value:function(t){var e=t.loss,r=e+1,i=[.25*r,.25*r,r,.25*r,.2*r,.2*r];return this.spsa(e,i,2,t.values,500)}},{key:"spsa",value:function(t,e,r,i,n){for(var s=null,a=1/0,l=new Array(6),o=new Array(6),u=new Array(6),c=0;c<n;c++){for(var h=r/Math.pow(c+1,.16666666666666666),f=0;f<6;f++)l[f]=Math.random()>.5?1:-1,o[f]=i[f]+h*l[f],u[f]=i[f]-h*l[f];for(var v=this.loss(o)-this.loss(u),g=0;g<6;g++){var p=v/(2*h)*l[g],d=e[g]/Math.pow(t+c+1,1);i[g]=b(i[g]-d*p,g)}var m=this.loss(i);m<a&&(s=i.slice(0),a=m)}return{values:s,loss:a};function b(t,e){var r=100;return 2===e?r=7500:4!==e&&5!==e||(r=200),3===e?t>r?t%=r:t<0&&(t=r+t%r):t<0?t=0:t>r&&(t=r),t}}},{key:"loss",value:function(t){var e=this.reusedColor;e.set(0,0,0),e.invert(t[0]/100),e.sepia(t[1]/100),e.saturate(t[2]/100),e.hueRotate(3.6*t[3]),e.brightness(t[4]/100),e.contrast(t[5]/100);var r=e.hsl();return Math.abs(e.r-this.target.r)+Math.abs(e.g-this.target.g)+Math.abs(e.b-this.target.b)+Math.abs(r.h-this.targetHSL.h)+Math.abs(r.s-this.targetHSL.s)+Math.abs(r.l-this.targetHSL.l)}},{key:"css",value:function(t){function e(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Math.round(t[e]*r)}return"filter: invert(".concat(e(0),"%) sepia(").concat(e(1),"%) saturate(").concat(e(2),"%) hue-rotate(").concat(e(3,3.6),"deg) brightness(").concat(e(4),"%) contrast(").concat(e(5),"%);")}}]),e}()}},created:function(){this.init()},destroyed:function(){clearInterval(this.timer)}},u=(r(305),r(9)),c=Object(u.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("p",[t._v("支持任意格式色值，包括颜色关键字。")]),t._v(" "),r("el-form",{staticClass:"filter-form",attrs:{id:"form","label-width":"100px"}},[r("el-form-item",{attrs:{label:"原始色"}},[r("el-input",{ref:"start",style:{color:t.startInputColor},attrs:{id:"start",placeholder:"原始色值",name:"start",autocomplete:"off",autofocus:""},on:{change:t.initValue},model:{value:t.startColor,callback:function(e){t.startColor="string"==typeof e?e.trim():e},expression:"startColor"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"目标色"}},[r("el-input",{ref:"end",style:{color:t.endInputColor},attrs:{id:"end",placeholder:"呈现色值",name:"end",autocomplete:"off"},on:{change:t.initValue},model:{value:t.endColor,callback:function(e){t.endColor="string"==typeof e?e.trim():e},expression:"endColor"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.getFilterRules}},[t._v("转换")]),t._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:t.autoGetFilterRules}},[t._v("自动转换\n      ")])],1)],1),t._v(" "),r("div",{staticClass:"filter-block"},[r("div",{staticClass:"filter-span",style:{background:t.startInputColor},attrs:{id:"colorReal"}},[r("span",[t._v("真背景色")])]),t._v(" "),r("div",{staticClass:"filter-span",style:t.filter,attrs:{id:"colorFilter"}},[r("span",[t._v("滤镜呈现")])])]),t._v(" "),r("p",{staticClass:"filter-show",attrs:{id:"show"}},[t._v("\n    "+t._s(t.filter)+"\n  ")]),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.filter,expression:"filter"}],staticClass:"filter-loss",attrs:{id:"loss-detail"}},[t._v("\n    滤镜色值："+t._s(t.filterColor)+"，误差："+t._s(t.errorValue)+"。"+t._s(t.errorMessage)+"\n  ")])],1)}),[],!1,null,"77a35325",null);e.default=c.exports}}]);