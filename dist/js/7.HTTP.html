<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>http | 羊圈</title>
    <meta name="description" content="神羊的羊圈">
    <meta name="theme-color" content="#00adb5">
  <link rel="icon" href="/images/favicon.png">
  <meta itemprop="image" content="/js_tricks/images/favicon.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#00adb5">
    
    <link rel="preload" href="/assets/css/0.styles.18cbf62c.css" as="style"><link rel="preload" href="/assets/js/app.c1618cf4.js" as="script"><link rel="preload" href="/assets/js/3.ed1bf183.js" as="script"><link rel="preload" href="/assets/js/73.6c6af6b0.js" as="script"><link rel="prefetch" href="/assets/js/1.b3385aaa.js"><link rel="prefetch" href="/assets/js/10.b526617f.js"><link rel="prefetch" href="/assets/js/100.9c76dc44.js"><link rel="prefetch" href="/assets/js/101.6b17334c.js"><link rel="prefetch" href="/assets/js/102.6072298e.js"><link rel="prefetch" href="/assets/js/103.8bf22d9c.js"><link rel="prefetch" href="/assets/js/104.da37280c.js"><link rel="prefetch" href="/assets/js/105.f6adc7cb.js"><link rel="prefetch" href="/assets/js/106.c479af52.js"><link rel="prefetch" href="/assets/js/107.7864a896.js"><link rel="prefetch" href="/assets/js/108.59251a56.js"><link rel="prefetch" href="/assets/js/109.401930b9.js"><link rel="prefetch" href="/assets/js/11.8c8a17aa.js"><link rel="prefetch" href="/assets/js/110.7f385c95.js"><link rel="prefetch" href="/assets/js/111.874ae40f.js"><link rel="prefetch" href="/assets/js/112.b88da53c.js"><link rel="prefetch" href="/assets/js/12.9a241d83.js"><link rel="prefetch" href="/assets/js/13.50f10eff.js"><link rel="prefetch" href="/assets/js/14.e6ebc69a.js"><link rel="prefetch" href="/assets/js/15.1145f768.js"><link rel="prefetch" href="/assets/js/16.8f53c91c.js"><link rel="prefetch" href="/assets/js/17.f5d33107.js"><link rel="prefetch" href="/assets/js/18.0fa172d4.js"><link rel="prefetch" href="/assets/js/19.b3ec819d.js"><link rel="prefetch" href="/assets/js/20.39dd808d.js"><link rel="prefetch" href="/assets/js/21.982519d1.js"><link rel="prefetch" href="/assets/js/22.e43852de.js"><link rel="prefetch" href="/assets/js/23.d20b98a1.js"><link rel="prefetch" href="/assets/js/24.8df2408b.js"><link rel="prefetch" href="/assets/js/25.6b7a2412.js"><link rel="prefetch" href="/assets/js/26.e0d54718.js"><link rel="prefetch" href="/assets/js/27.fa540f01.js"><link rel="prefetch" href="/assets/js/28.12872a08.js"><link rel="prefetch" href="/assets/js/29.a5357381.js"><link rel="prefetch" href="/assets/js/30.877d7c50.js"><link rel="prefetch" href="/assets/js/31.b4278efa.js"><link rel="prefetch" href="/assets/js/32.ebc68bbd.js"><link rel="prefetch" href="/assets/js/33.f08d05c9.js"><link rel="prefetch" href="/assets/js/34.a7d62a8e.js"><link rel="prefetch" href="/assets/js/35.f5d32a01.js"><link rel="prefetch" href="/assets/js/36.1ba48a2d.js"><link rel="prefetch" href="/assets/js/37.3e7062af.js"><link rel="prefetch" href="/assets/js/38.46a40d24.js"><link rel="prefetch" href="/assets/js/39.f11b85d4.js"><link rel="prefetch" href="/assets/js/4.1b01fc51.js"><link rel="prefetch" href="/assets/js/40.28ecd869.js"><link rel="prefetch" href="/assets/js/41.5e8bc3d9.js"><link rel="prefetch" href="/assets/js/42.ff6b4e3c.js"><link rel="prefetch" href="/assets/js/43.9a77ccd5.js"><link rel="prefetch" href="/assets/js/44.b54ec253.js"><link rel="prefetch" href="/assets/js/45.cbee26e2.js"><link rel="prefetch" href="/assets/js/46.5e19d09a.js"><link rel="prefetch" href="/assets/js/47.0acc679f.js"><link rel="prefetch" href="/assets/js/48.bfdd685b.js"><link rel="prefetch" href="/assets/js/49.e42f572c.js"><link rel="prefetch" href="/assets/js/5.d587daef.js"><link rel="prefetch" href="/assets/js/50.85bfbfcd.js"><link rel="prefetch" href="/assets/js/51.576a7373.js"><link rel="prefetch" href="/assets/js/52.f26ffee5.js"><link rel="prefetch" href="/assets/js/53.163cf701.js"><link rel="prefetch" href="/assets/js/54.c1132ecc.js"><link rel="prefetch" href="/assets/js/55.e089f0d4.js"><link rel="prefetch" href="/assets/js/56.be59a8ef.js"><link rel="prefetch" href="/assets/js/57.a015f201.js"><link rel="prefetch" href="/assets/js/58.0235e47f.js"><link rel="prefetch" href="/assets/js/59.0b6f5acf.js"><link rel="prefetch" href="/assets/js/6.69e07e2c.js"><link rel="prefetch" href="/assets/js/60.641c2f95.js"><link rel="prefetch" href="/assets/js/61.17b03fa8.js"><link rel="prefetch" href="/assets/js/62.96134956.js"><link rel="prefetch" href="/assets/js/63.f845d120.js"><link rel="prefetch" href="/assets/js/64.e9ed93d9.js"><link rel="prefetch" href="/assets/js/65.2bd53147.js"><link rel="prefetch" href="/assets/js/66.1f03bf79.js"><link rel="prefetch" href="/assets/js/67.47eb30d1.js"><link rel="prefetch" href="/assets/js/68.cc339c5a.js"><link rel="prefetch" href="/assets/js/69.2ff09789.js"><link rel="prefetch" href="/assets/js/7.3199f861.js"><link rel="prefetch" href="/assets/js/70.9d03d949.js"><link rel="prefetch" href="/assets/js/71.7eab78cd.js"><link rel="prefetch" href="/assets/js/72.20dd5f6e.js"><link rel="prefetch" href="/assets/js/74.8eed043b.js"><link rel="prefetch" href="/assets/js/75.3b5158cd.js"><link rel="prefetch" href="/assets/js/76.0eacd2d9.js"><link rel="prefetch" href="/assets/js/77.c3ba3709.js"><link rel="prefetch" href="/assets/js/78.843656e9.js"><link rel="prefetch" href="/assets/js/79.99bae0b9.js"><link rel="prefetch" href="/assets/js/8.8d4fcdde.js"><link rel="prefetch" href="/assets/js/80.4d3c67b0.js"><link rel="prefetch" href="/assets/js/81.85eaf0e7.js"><link rel="prefetch" href="/assets/js/82.27feb7aa.js"><link rel="prefetch" href="/assets/js/83.7686c618.js"><link rel="prefetch" href="/assets/js/84.941fa5d5.js"><link rel="prefetch" href="/assets/js/85.46a4182a.js"><link rel="prefetch" href="/assets/js/86.1d2fa06f.js"><link rel="prefetch" href="/assets/js/87.1fa71add.js"><link rel="prefetch" href="/assets/js/88.a9a069f0.js"><link rel="prefetch" href="/assets/js/89.93d73858.js"><link rel="prefetch" href="/assets/js/9.99351bd6.js"><link rel="prefetch" href="/assets/js/90.029a12be.js"><link rel="prefetch" href="/assets/js/91.669f4475.js"><link rel="prefetch" href="/assets/js/92.686c84ef.js"><link rel="prefetch" href="/assets/js/93.47bd8585.js"><link rel="prefetch" href="/assets/js/94.0b908759.js"><link rel="prefetch" href="/assets/js/95.f4d85cb9.js"><link rel="prefetch" href="/assets/js/96.e57f6246.js"><link rel="prefetch" href="/assets/js/97.b5660771.js"><link rel="prefetch" href="/assets/js/98.91198c9e.js"><link rel="prefetch" href="/assets/js/99.9a6c1efc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.18cbf62c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">羊圈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">blog</a></div><div class="nav-item"><a href="https://qishaoxuan.github.io/animate_resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  about me
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">blog</a></div><div class="nav-item"><a href="https://qishaoxuan.github.io/animate_resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  about me
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/1.基础知识.html" class="sidebar-link">基础知识</a></li><li><a href="/js/2.数据类型.html" class="sidebar-link">数据类型</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="http">http</h1> <h2 id="http-2">HTTP</h2> <p>超文本传输协议，是一个基于请求与响应，无状态的，是一个基于TCP/IP实现的应用层协议</p> <p>TCP: Transmission Control Protocol 传输控制协议，负责应用软件（比如你的浏览器）和网络软件之间的通信
IP: Internet Protocol 网际协议，计算机用来相互识别的通信的一种机制</p> <table><thead><tr><th><strong>版本</strong></th> <th><strong>产生时间</strong></th> <th><strong>内容</strong></th> <th><strong>发展现状</strong></th></tr></thead> <tbody><tr><td>HTTP/0.9</td> <td>1991年</td> <td>不涉及数据包传输，规定客户端和服务器之间通信格式，只能GET请求</td> <td>没有作为正式的标准</td></tr> <tr><td>HTTP/1.0</td> <td>1996年</td> <td>传输内容格式不限制，增加PUT、PATCH、HEAD、 OPTIONS、DELETE命令</td> <td>正式作为标准</td></tr> <tr><td>HTTP/1.1</td> <td>1997年</td> <td>持久连接(长连接)、节约带宽、HOST域、管道机制、分块传输编码</td> <td>2015年前使用最广泛</td></tr> <tr><td>HTTP/2</td> <td>2015年</td> <td>多路复用（通过单一的HTTP/2连接请求发起多重的请求-响应消息，多个请求stream共享一个TCP连接，实现多留并行而不是依赖建立多个TCP连接）、服务器推送、头信息压缩、二进制协议等</td> <td>逐渐覆盖市场</td></tr></tbody></table> <p>请求：</p> <div class="language-text extra-class"><pre class="language-text"><code>请求方法 URL HTTP/版本号
请求首部字段(可选)
空行
body
</code></pre></div><p>响应：</p> <div class="language-text extra-class"><pre class="language-text"><code>HTTP/版本号 返回码 返回码描述
应答首部字段(可选)
空行
body
</code></pre></div><h3 id="url">URL</h3> <p>使用HTTP协议访问资源是通过URL（Uniform Resource Locator）统一资源定位符来实现的。URL的格式如下：</p> <div class="language-text extra-class"><pre class="language-text"><code>scheme://host:port/path?query

scheme: 表示协议，如Http, Https, Ftp等；
host: 表示所访问资源所在的主机名：如：www.abc.com;
port: 表示端口号，默认为80；
path: 表示所访问的资源在目标主机上的储存路径；
query: 表示查询条件；

例如： http://www.abc.com/search?words=abc
</code></pre></div><h3 id="报文字段">报文字段</h3> <p>HTTP的报文字段分为5种：</p> <ul><li>请求报文字段</li> <li>应答报文字段</li> <li>实体首部字段</li> <li>通用报文字段</li> <li>其他报文字段</li></ul> <h4 id="请求报文字段">请求报文字段</h4> <p>HTTP请求中支持的报文字段。</p> <div class="language-text extra-class"><pre class="language-text"><code>Accept：客户端能够处理的媒体类型。如text/html, 表示客户端让服务器返回html类型的数据，如果没有，返回text
类型的也可以。媒体类型的格式一般为：type/subType, 表示优先请求subType类型的数据，如果没有，返回type类型
数据也可以。

常见的媒体类型：
文本文件：text/html, text/plain, text/css, application/xml
图片文件：iamge/jpeg, image/gif, image/png;
视频文件：video/mpeg
应用程序使用的二进制文件：application/octet-stream, application/zip

Accept字段可设置多个字段值，这样服务器依次进行匹配，并返回最先匹配到的媒体类型，当然，也可通过q参数来设置
媒体类型的权重，权重越高，优先级越高。q的取值为[0, 1], 可取小数点后3位，默认为1.0。例如：
Accept: text/html, application/xml; q=0.9, */*

Accept-Charset: 表示客户端支持的字符集。例如：Accept-Charset: GB2312, ISO-8859-1

Accept-Encoding： 表示客户端支持的内容编码格式。如：Accept-Encoding：gzip

常用的内容编码：
gzip: 由文件压缩程序gzip生成的编码格式；
compress: 由Unix文件压缩程序compress生成的编码格式；
deflate: 组合使用zlib和deflate压缩算法生成的编码格式；
identity：默认的编码格式，不执行压缩。

Accept-Language：表示客户端支持的语言。如：Accept-Language: zh-cn, en

Authorization：表示客户端的认证信息。客户端在访问需要认证的也是时，服务器会返回401，随后客户端将认证信息
加在Authorization字段中发送到服务器后，如果认证成功，则返回200. 如Linux公社下的Ftp服务器就是这种流程：
ftp://ftp1.linuxidc.com。

Host: 表示访问资源所在的主机名，即URL中的域名部分。如：m.baidu.com

If-Match: If-Match的值与所请求资源的ETag值（实体标记，与资源相关联。资源变化，实体标记跟着变化）一致时，
服务器才处理此请求。

If-Modified-Since: 用于确认客户端拥有的本地资源的时效性。 如果客户端请求的资源在If-Modified-Since指定
的时间后发生了改变，则服务器处理该请求。如：If-Modified-Since:Thu 09 Jul 2018 00:00:00, 表示如果客户
端请求的资源在2018年1月9号0点之后发生了变化，则服务器处理改请求。通过该字段我们可解决以下问题：有一个包含大
量数据的接口，且实时性较高，我们在刷新时就可使用改字段，从而避免多余的流量消耗。

If-None-Match: If-Match的值与所请求资源的ETag值不一致时服务器才处理此请求。

If-Range： If-Range的值（ETag值或时间）与所访问资源的ETag值或时间相一致时，服务器处理此请求，并返回
Range字段中设置的指定范围的数据。如果不一致，则返回所有内容。If-Range其实算是If-Match的升级版，因为它
的值不匹配时，依然能够返回数据，而If-Match不匹配时，请求不会被处理，需要数据时需再次进行请求。


If-Unmodified-Since：与If-Modified-Since相反，表示请求的资源在指定的时间之后未发生变化时，才处理请求，
否则返回412。

Max-Forwards：表示请求可经过的服务器的最大数目，请求每被转发一次，Max-Forwards减1，当Max-Forwards为0
时，所在的服务器将不再转发，而是直接做出应答。通过此字段可定位通信问题，比如之前支付宝光纤被挖断，就可通过设
置Max-Forwards来定位大概的位置。

Proxy-Authorization：当客户端接收到来自代理服务器的认证质询时，客户端会将认证信息添加到
Proxy-Authorization来完成认证。与Authorization类似，只不过Authorization是发生在客户端与服务端之间。

Range：获取部分资源，例如：Range: bytes=500-1000表示获取指定资源的第500到1000字节之间的内容，如果服务器
能够正确处理，则返回206作为应答，表示返回了部分数据，如果不能处理这种范围请求，则以200作为应答，返回完整的
数据，

Referer：告知服务器请求是从哪个页面发起的。例如在百度首页中搜索某个关键字，结果页面的请求头部就会有这个字段，
其值为https://www.baidu.com/。通过这个字段可统计广告的点击情况。

User-Agent：将发起请求的浏览器和代理名称等信息发送给服务端，例如：
User-Agent: Mozilla/5.0 (Linux; Android 5.0; SM-G900P Build/LRX21T) AppleWebKit/537.36
(KHTML, like Gecko) Chrome/63.0.3239.84 Mobile Safari/537.36
复制代码
</code></pre></div><h4 id="应答报文字段">应答报文字段</h4> <p>HTTP应答中支持的报文字段。</p> <div class="language-text extra-class"><pre class="language-text"><code>表示不能处理。

Age：服务端告知客户端，源服务器（而不是缓存服务器）在多久之前创建了响应。
单位为秒。

ETag： 实体资源的标识，可用来请求指定的资源。

Location：请求的资源所在的新位置。

Proxy-Authenticate：将代理服务器需要的认证信息发送给客户端。

Retry-After：服务端告知客户端多久之后再重试，一般与503和3xx重定向类型的应答一起使用。

Server：告知服务端当前使用的HTTP服务器应用程序的相关信息。

WWW-Authenticate：告知客户端适用于所访问资源的认证方案，如Basic或Digest。401的响应中肯定带有
WWW-Authenticate字段。
复制代码
</code></pre></div><h4 id="实体首部字段">实体首部字段</h4> <div class="language-text extra-class"><pre class="language-text"><code>Allow：通知客户端，服务器所支持的请求方法。但服务器收到不支持的请求方法时，会以405（Method Not Allowed）
作为响应。

Content-Encoding：告知客户端，服务器对资源的内容编码。
  
Content-Language：告知客户端，资源所使用的自然语言。
  
Content-Length：告知客户端资源的长度
  
Content-Location：告知客户端资源所在的位置。
  
Content-Type：告知客户端资源的媒体类型，取值同请求首部字段中的Accept。
  
Expires：告知客户端资源的失效日期。可用于对缓存的处理。
  
Last-Modified：告知客户端资源最后一次修改的时间。
复制代码
</code></pre></div><h4 id="通用报文字段">通用报文字段</h4> <p>即可在HTTP请求中使用，也可在HTTP应答中使用的报文字段。</p> <div class="language-text extra-class"><pre class="language-text"><code>Cache-Control：控制缓存行为；

Connection：管理持久连接，设置其值为Keep-Alive可实现长连接。

Date：创建HTTP报文的日期和时间。

Pragma：Http/1.1之前的历史遗留字段，仅作为HTTP/1.0向后兼容而定义，虽然是通用字段，当通常被使用在客户单的
请求中，如Pragma: no-cache, 表示客户端在请求过程中不循序服务端返回缓存的数据；

Transfer-Encoding：规定了传输报文主题时使用的传输编码，如Transfer-Encoding: chunked

Upgrade: 用于检查HTTP协议或其他协议是否有可使用的更高版本。

Via：追踪客户端和服务端之间的报文的传输路径，还可避免会环的发生，所以在经过代理时必须添加此字段。

Warning：Http/1.1的报文字段，从Http/1.0的AfterRetry演变而来，用来告知用户一些与缓存相关的警告信息。
复制代码
</code></pre></div><h4 id="其他报文字段">其他报文字段</h4> <p>这些字段不是HTTP协议中定义的，但被广泛应用于HTTP请求中。</p> <ul><li>Cookie：属于请求型报文字段，在请求时添加Cookie, 以实现HTTP的状态记录。</li> <li>Set-Cookie：属于应答型报文字段。服务器给客户端传递Cookie信息时，就是通过此字段实现的。</li></ul> <p>Set-Cookie的字段属性：</p> <div class="language-text extra-class"><pre class="language-text"><code>NAME=VALUE：赋予Cookie的名称和值；
expires=DATE: Cookie的有效期；
path=PATH: 将服务器上的目录作为Cookie的适用对象，若不指定，则默认为文档所在的文件目录；
domin=域名：作为Cookies适用对象的域名，若不指定，则默认为创建Cookie的服务器域名；
Secure: 仅在HTTPS安全通信是才会发送Cookie；
HttpOnly: 使Cookie不能被JS脚本访问；

如：Set-Cookie:BDSVRBFE=Go; max-age=10; domain=m.baidu.com; path=/
</code></pre></div><h3 id="特点">特点</h3> <ul><li>无状态：协议对客户端没有状态存储，对事物处理没有“记忆”能力，比如访问一个网站需要反复进行登录操作</li> <li>无连接：HTTP/1.1之前，由于无状态特点，每次请求需要通过TCP三次握手四次挥手，和服务器重新建立连接。比如某个客户机在短时间多次请求同一个资源，服务器并不能区别是否已经响应过用户的请求，所以每次需要重新响应请求，需要耗费不必要的时间和流量。</li> <li>基于请求和响应：基本的特性，由客户端发起请求，服务端响应</li> <li>简单快速、灵活</li> <li>通信使用明文、请求和响应不会对通信方进行确认、无法保护数据的完整性</li></ul> <h3 id="缺点">缺点</h3> <ul><li>通信使用明文，可能被窃听</li> <li>不验证通信方的身份，可能遭遇伪装</li> <li>无法证明报文的完整性，有可能遭遇篡改</li></ul> <h2 id="https">HTTPS</h2> <p>HTTP是明文传输的，这就意味着介于发送端和接收端之间的任意节点都可以知道传输的内容是什么，这些节点可以是路由器、代理等</p> <p>HTTPS，经由HTTP进行通信，利用SSL/TLS建立全信道，加密数据包。HTTPS比HTTP多了一层TLS/SSL协议</p> <p>TLS（传输层安全）跟SSL（安全套接字）可以理解成类似的东西，可以将SSL理解成负责对HTTP的数据进行加密的加密套件，而TLS是SSL的升级版/继任者。</p> <p>TLS的基本工作方式是，客户端使用非对称加密与服务器进行通信，实现身份验证并协商对称加密使用的密钥， 然后对称加密算法采用协商密钥对信息以及信息摘要进行加密通信，不同的节点之间采用的对称密钥不同，从而可以保证信息只能通信双方获取。</p> <h3 id="身份验证ca和证书">身份验证CA和证书</h3> <p>解决身份验证问题的关键是确保获取的公钥途径是合法的，能够验证服务器的身份信息，为此需要引入权威的第三方机构CA(如沃通CA)。CA 负责核实公钥的拥有者的信息，并颁发认证&quot;证书&quot;，同时能够为使用者提供证书验证服务，即PKI体系(PKI基础知识)。
基本的原理为，CA负责审核信息，然后对关键信息利用私钥进行&quot;签名&quot;，公开对应的公钥，客户端可以利用公钥验证签名。</p> <h3 id="特点-2">特点</h3> <ul><li>内容加密：采用混合加密技术，中间者无法直接查看明文内容</li> <li>验证身份：通过证书认证客户端访问的是自己的服务器</li> <li>保护数据完整性：防止传输的内容被中间人冒充或者篡改</li></ul> <p>**混合加密：**结合非对称加密和对称加密技术。客户端使用对称加密生成密钥对传输数据进行加密，然后使用非对称加密的公钥再对秘钥进行加密，所以网络上传输的数据是被秘钥加密的密文和用公钥加密后的秘密秘钥，因此即使被黑客截取，由于没有私钥，无法获取到加密明文的秘钥，便无法获取到明文数据。</p> <p>**数字摘要：**通过单向hash函数对原文进行哈希，将需加密的明文“摘要”成一串固定长度(如128bit)的密文，不同的明文摘要成的密文其结果总是不相同，同样的明文其摘要必定一致，并且即使知道了摘要也不能反推出明文。</p> <p>**数字签名技术：**数字签名建立在公钥加密体制基础上，是公钥加密技术的另一类应用。它把公钥加密技术和数字摘要结合起来，形成了实用的数字签名技术。</p> <blockquote><p>非对称加密过程需要用到公钥进行加密，那么公钥从何而来？其实公钥就被包含在数字证书中，数字证书通常来说是由受信任的数字证书颁发机构CA，在验证服务器身份后颁发，证书中包含了一个密钥对（公钥和私钥）和所有者识别信息。数字证书被放到服务端，具有服务器身份验证和数据传输加密功能。</p></blockquote> <h3 id="缺点-2">缺点</h3> <ul><li>SSL证书需要购买申请，功能越强大的证书费用越高</li> <li>SSL证书通常需要绑定IP，不能在同一IP上绑定多个域名，IPv4资源不可能支撑这个消耗（SSL有扩展可以部分解决这个问题，但是比较麻烦，而且要求浏览器、操作系统支持，Windows XP就不支持这个扩展，考虑到XP的装机量，这个特性几乎没用）。</li> <li>根据ACM CoNEXT数据显示，使用HTTPS协议会使页面的加载时间延长近50%，增加10%到20%的耗电。</li> <li>HTTPS连接缓存不如HTTP高效，流量成本高。</li> <li>HTTPS连接服务器端资源占用高很多，支持访客多的网站需要投入更大的成本。</li> <li>HTTPS协议握手阶段比较费时，对网站的响应速度有影响，影响用户体验。比较好的方式是采用分而治之，类似12306网站的主页使用HTTP协议，有关于用户信息等方面使用HTTPS。</li></ul> <h2 id="ajax">ajax</h2> <p>Asynchronous [e'sɪŋkrənəs] Javascript And XML， AJAX 不是一门的新的语言，而是对现有技术的综合利用。 本质是在 HTTP 协议的基础上以异步的方式与服务器进行通信。</p> <h3 id="xmlhttprequest-对象">XMLHttpRequest 对象</h3> <p>浏览器内建对象，用于与服务器通信(交换数据)</p> <h3 id="get-和-post-请求的区别">GET 和 POST 请求的区别</h3> <ol><li>HTTP没有要求，如果Method是POST数据就要放在BODY中。也没有要求，如果Method是GET，数据（参数）就一定要放在URL中而不能放在BODY中。但在浏览器中，GET 提交的数据会放在 URL 之后，POST 是把提交的数据放在 HTTP 消息的 Body 中</li> <li>HTTP 协议从未规定过GET/POST请求长度是多少，GET 提交的数据大小有限制是某些浏览器或服务器对 URL 的长度有限制，而 POST 方法提交的数据没有限制</li> <li>多数浏览器对于POST采用两阶段发送数据的</li> <li>GET 方式请求的数据会被浏览器缓存起来</li> <li>GET 幂等，而 POST 请求不是</li></ol> <blockquote><p>幂等性是指一次和多次请求某一个资源应该具有同样的副作用。简单来说意味着对同一URL的多个请求应该返回同样的结果。</p></blockquote> <h3 id="跨域">跨域</h3> <p>浏览器的同源策略限制，浏览器会拒绝跨域请求</p> <h4 id="简单请求和非简单请求">简单请求和非简单请求</h4> <p>简单请求：使用下列方法之一且没有人为设置对 CORS 安全的首部字段集合之外的其他首部字段：</p> <div class="language-text extra-class"><pre class="language-text"><code>GET
HEAD
POST- 仅当POST方法的Content-Type值等于下列之一才算作简单请求
 - text/plain
 - multipart/form-data
 - application/x-www-form-urlencoded
</code></pre></div><h4 id="jsonp">JSONP</h4> <p>利用资源请求标签（script）可引入不同域上的js脚本，在js文件载入完毕之后，触发回调</p> <p>优点：兼容性好（兼容低版本IE）
缺点：1.JSONP只支持GET请求； 2.错误处理机制缺失</p> <h4 id="cors">CORS</h4> <div class="language-text extra-class"><pre class="language-text"><code>Access-Control-Allow-Origin: foo.example    // 标识可接受的跨域请求源；  Access-Control-Allow-Methods: POST, GET, OPTIONS   //标识可接受的跨域请求方法,如GET、POST、OPTIONS；  Access-Control-Allow-Headers: X-PINGOTHER, Content-Type //标识可接受的跨域请求自定义头；  Access-Control-Max-Age: 86400。 //标识本次预请求的有效时间（秒），期间内无需再发送预请求；
</code></pre></div><h4 id="postmessage">postMessage</h4> <p>window.postMessage(message,targetOrigin) 方法是html5新引进的特性，可以使用它来向其它的window对象发送消息</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> output <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for the iframe to load</span>
iframe<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> onLoad<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Listen for messages on port1</span>
  channel<span class="token punctuation">.</span>port1<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> onMessage<span class="token punctuation">;</span>

  <span class="token comment">// Transfer port2 to the iframe</span>
  iframe<span class="token punctuation">.</span>contentWindow<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">'Hello from the main page!'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>channel<span class="token punctuation">.</span>port2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">// Handle messages received on port1</span>
<span class="token keyword">function</span> <span class="token function">onMessage</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  output<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="fetch">fetch</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle HTTP response</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handle network error</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>说明：</p> <ol><li>fetch api 返回的是一个 promise 对象</li> <li>Options:
<ul><li>method(String): HTTP 请求方法，默认为 GET</li> <li>body(String): HTTP 的请求参数</li> <li>headers(Object): HTTP 的请求头，默认为{}</li> <li>credentials(String): 默认为 omit,忽略的意思，也就是不带 cookie;还有两个参数，same-origin，意思就是同源请求带 cookie；include,表示无论跨域还是同源请求都会带 cookie</li></ul></li> <li>第一个 then 函数里面处理的是 response 的格式
<ul><li>status(number): HTTP 返回的状态码，范围在 100-599 之间
statusText(String): 服务器返回的状态文字描述，例如 Unauthorized,上图中返回的是 Ok
ok(Boolean): 如果状态码是以 2 开头的，则为 true
headers: HTTP 请求返回头
body: 返回体，这里有处理返回体的一些方法
text(): 将返回体处理成字符串类型
json()： 返回结果和 JSON.parse(responseText)一样
blob()： 返回一个 Blob，Blob 对象是一个不可更改的类文件的二进制数据
arrayBuffer()
formData()</li></ul></li></ol> <h3 id="问题">问题</h3> <ol><li>兼容性
IE 浏览器完全不支持 fetch，移动端的很多浏览器也不支持,所以，如果要在这些浏览器上使用 Fetch，就必须使用 fetch polyfill</li> <li>cookie 传递
必须在 header 参数里面加上 credientials: 'include'，才会如 xhr 一样将当前 cookies 带到请求中去</li> <li>fetch 和 xhr 的不同
fetch 虽然底层，但是还是缺少一些常用 xhr 有的方法，比如能够取消请求（abort）方法。fetch 在服务器返回 4xx、5xx 时是不会抛出错误的，这里需要手动通过，通过 response 中的 ok 字段和 status 字段来判断</li></ol> <h2 id="json">JSON</h2> <p>JSON(JavaScript Object Notation, JS 对象标记) 是一种轻量级的数据交换格式。它基于 ECMAScript 规范，采用独立于编程语言的文本格式来存储和表示数据。</p> <p>特点：</p> <ul><li>数据在 键值对 中</li> <li>数据由逗号分隔(最后一个 键值对 不能带逗号)</li> <li>花括号保存对象，方括号保存数组</li> <li>键使用双引号</li> <li>JSON 内部常用数据类型无非就是字符串、数字、布尔、日期、null 这么几个，字符串必须用双引号引起来，其余的都不用</li></ul> <p>优点：</p> <ol><li>基于纯文本，跨平台传递极其简单；</li> <li>Javascript 原生支持，后台语言几乎全部支持；</li> <li>轻量级数据格式，占用字符数量极少，特别适合互联网传递；</li> <li>可读性较强，虽然比不上 XML 那么一目了然，但在合理的依次缩进之后还是很容易识别的；</li> <li>容易编写和解析，当然前提是你要知道数据结构；</li></ol> <h2 id="xml">XML</h2> <ul><li>XML 指可扩展标记语言（EXtensible Markup Language）</li> <li>XML 是一种标记语言，很类似 HTML</li> <li>XML 的设计宗旨是传输数据，而非显示数据</li> <li>XML 标签没有被预定义。您需要自行定义标签。</li></ul> <p>AJAX 可用来与 XML 文件进行交互式通信。</p> <p>loadXMLDoc() 函数创建 XMLHttpRequest 对象，添加当服务器响应就绪时执行的函数，并将请求发送到服务器。
当服务器响应就绪时，会构建一个 HTML 表格，从 XML 文件中提取节点（元素），最后使用 XML 数据的 填充 id=&quot;demo&quot; 的表格元素：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">loadDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> xhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhttp<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  xhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cd_catalog.xml&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token parameter">xml</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> i<span class="token punctuation">;</span>
  <span class="token keyword">var</span> xmlDoc <span class="token operator">=</span> xml<span class="token punctuation">.</span>responseXML<span class="token punctuation">;</span>
  <span class="token keyword">var</span> table<span class="token operator">=</span><span class="token string">&quot;&lt;tr&gt;&lt;th&gt;Artist&lt;/th&gt;&lt;th&gt;Title&lt;/th&gt;&lt;/tr&gt;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> x <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;CD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span>x<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    table <span class="token operator">+=</span> <span class="token string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span> <span class="token operator">+</span>
    x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;ARTIST&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeValue <span class="token operator">+</span>
    <span class="token string">&quot;&lt;/td&gt;&lt;td&gt;&quot;</span> <span class="token operator">+</span>
    x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;TITLE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeValue <span class="token operator">+</span>
    <span class="token string">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;demo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> table<span class="token punctuation">;</span>
</code></pre></div><h2 id="状态码">状态码</h2> <p>补全状态码避免再去搜:
100——客户必须继续发出请求
101——客户要求服务器根据请求转换 HTTP 协议版本
200——交易成功
201——提示知道新文件的 URL
202——接受和处理、但处理未完成
203——返回信息不确定或不完整
204——请求收到，但返回信息为空
205——服务器完成了请求，用户代理必须复位当前已经浏览过的文件
206——服务器已经完成了部分用户的 GET 请求
300——请求的资源可在多处得到
301——删除请求数据
302——在其他地址发现了请求数据
303——建议客户访问其他 URL 或访问方式
304——客户端已经执行了 GET，但文件未变化
305——请求的资源必须从服务器指定的地址得到
306——前一版本 HTTP 中使用的代码，现行版本中不再使用
307——申明请求的资源临时性删除
400——错误请求，如语法错误
401——请求授权失败
402——保留有效 ChargeTo 头响应
403——请求不允许
404——没有发现文件、查询或 URl
405——用户在 Request-Line 字段定义的方法不允许
406——根据用户发送的 Accept，请求资源不可访问
407——类似 401，用户必须首先在代理服务器上得到授权
408——客户端没有在用户指定的饿时间内完成请求
409——对当前资源状态，请求不能完成
410——服务器上不再有此资源且无进一步的参考地址
411——服务器拒绝用户定义的 Content-Length 属性请求
412——一个或多个请求头字段在当前请求中错误
413——请求的资源大于服务器允许的大小
414——请求的资源 URL 长于服务器允许的长度
415——请求资源不支持请求项目格式
416——请求中包含 Range 请求头字段，在当前请求资源范围内没有 range 指示值，请求也不包含 If-Range 请求头字段
417——服务器不满足请求 Expect 头字段指定的期望值，如果是代理服务器，可能是下一级服务器不能满足请求
500——服务器产生内部错误
501——服务器不支持请求的函数
502——服务器暂时不可用，有时是为了防止发生系统过载
503——服务器过载或暂停维修
504——关口过载，服务器使用另一个关口或服务来响应用户，等待时间设定值较长
505——服务器不支持或拒绝支请求头中指定的 HTTP 版本</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><div class="cat-container" data-v-a13867c0><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-a13867c0></canvas></div></div></div>
    <script src="/assets/js/app.c1618cf4.js" defer></script><script src="/assets/js/3.ed1bf183.js" defer></script><script src="/assets/js/73.6c6af6b0.js" defer></script>
  </body>
</html>
