<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>正则表达式(RegExp) | 羊圈</title>
    <meta name="description" content="神羊的羊圈">
    <meta name="theme-color" content="#00adb5">
  <link rel="icon" href="/images/favicon.png">
  <meta itemprop="image" content="/js_tricks/images/favicon.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#00adb5">
    
    <link rel="preload" href="/assets/css/0.styles.18cbf62c.css" as="style"><link rel="preload" href="/assets/js/app.c1618cf4.js" as="script"><link rel="preload" href="/assets/js/3.ed1bf183.js" as="script"><link rel="preload" href="/assets/js/89.93d73858.js" as="script"><link rel="prefetch" href="/assets/js/1.b3385aaa.js"><link rel="prefetch" href="/assets/js/10.b526617f.js"><link rel="prefetch" href="/assets/js/100.9c76dc44.js"><link rel="prefetch" href="/assets/js/101.6b17334c.js"><link rel="prefetch" href="/assets/js/102.6072298e.js"><link rel="prefetch" href="/assets/js/103.8bf22d9c.js"><link rel="prefetch" href="/assets/js/104.da37280c.js"><link rel="prefetch" href="/assets/js/105.f6adc7cb.js"><link rel="prefetch" href="/assets/js/106.c479af52.js"><link rel="prefetch" href="/assets/js/107.7864a896.js"><link rel="prefetch" href="/assets/js/108.59251a56.js"><link rel="prefetch" href="/assets/js/109.401930b9.js"><link rel="prefetch" href="/assets/js/11.8c8a17aa.js"><link rel="prefetch" href="/assets/js/110.7f385c95.js"><link rel="prefetch" href="/assets/js/111.874ae40f.js"><link rel="prefetch" href="/assets/js/112.b88da53c.js"><link rel="prefetch" href="/assets/js/12.9a241d83.js"><link rel="prefetch" href="/assets/js/13.50f10eff.js"><link rel="prefetch" href="/assets/js/14.e6ebc69a.js"><link rel="prefetch" href="/assets/js/15.1145f768.js"><link rel="prefetch" href="/assets/js/16.8f53c91c.js"><link rel="prefetch" href="/assets/js/17.f5d33107.js"><link rel="prefetch" href="/assets/js/18.0fa172d4.js"><link rel="prefetch" href="/assets/js/19.b3ec819d.js"><link rel="prefetch" href="/assets/js/20.39dd808d.js"><link rel="prefetch" href="/assets/js/21.982519d1.js"><link rel="prefetch" href="/assets/js/22.e43852de.js"><link rel="prefetch" href="/assets/js/23.d20b98a1.js"><link rel="prefetch" href="/assets/js/24.8df2408b.js"><link rel="prefetch" href="/assets/js/25.6b7a2412.js"><link rel="prefetch" href="/assets/js/26.e0d54718.js"><link rel="prefetch" href="/assets/js/27.fa540f01.js"><link rel="prefetch" href="/assets/js/28.12872a08.js"><link rel="prefetch" href="/assets/js/29.a5357381.js"><link rel="prefetch" href="/assets/js/30.877d7c50.js"><link rel="prefetch" href="/assets/js/31.b4278efa.js"><link rel="prefetch" href="/assets/js/32.ebc68bbd.js"><link rel="prefetch" href="/assets/js/33.f08d05c9.js"><link rel="prefetch" href="/assets/js/34.a7d62a8e.js"><link rel="prefetch" href="/assets/js/35.f5d32a01.js"><link rel="prefetch" href="/assets/js/36.1ba48a2d.js"><link rel="prefetch" href="/assets/js/37.3e7062af.js"><link rel="prefetch" href="/assets/js/38.46a40d24.js"><link rel="prefetch" href="/assets/js/39.f11b85d4.js"><link rel="prefetch" href="/assets/js/4.1b01fc51.js"><link rel="prefetch" href="/assets/js/40.28ecd869.js"><link rel="prefetch" href="/assets/js/41.5e8bc3d9.js"><link rel="prefetch" href="/assets/js/42.ff6b4e3c.js"><link rel="prefetch" href="/assets/js/43.9a77ccd5.js"><link rel="prefetch" href="/assets/js/44.b54ec253.js"><link rel="prefetch" href="/assets/js/45.cbee26e2.js"><link rel="prefetch" href="/assets/js/46.5e19d09a.js"><link rel="prefetch" href="/assets/js/47.0acc679f.js"><link rel="prefetch" href="/assets/js/48.bfdd685b.js"><link rel="prefetch" href="/assets/js/49.e42f572c.js"><link rel="prefetch" href="/assets/js/5.d587daef.js"><link rel="prefetch" href="/assets/js/50.85bfbfcd.js"><link rel="prefetch" href="/assets/js/51.576a7373.js"><link rel="prefetch" href="/assets/js/52.f26ffee5.js"><link rel="prefetch" href="/assets/js/53.163cf701.js"><link rel="prefetch" href="/assets/js/54.c1132ecc.js"><link rel="prefetch" href="/assets/js/55.e089f0d4.js"><link rel="prefetch" href="/assets/js/56.be59a8ef.js"><link rel="prefetch" href="/assets/js/57.a015f201.js"><link rel="prefetch" href="/assets/js/58.0235e47f.js"><link rel="prefetch" href="/assets/js/59.0b6f5acf.js"><link rel="prefetch" href="/assets/js/6.69e07e2c.js"><link rel="prefetch" href="/assets/js/60.641c2f95.js"><link rel="prefetch" href="/assets/js/61.17b03fa8.js"><link rel="prefetch" href="/assets/js/62.96134956.js"><link rel="prefetch" href="/assets/js/63.f845d120.js"><link rel="prefetch" href="/assets/js/64.e9ed93d9.js"><link rel="prefetch" href="/assets/js/65.2bd53147.js"><link rel="prefetch" href="/assets/js/66.1f03bf79.js"><link rel="prefetch" href="/assets/js/67.47eb30d1.js"><link rel="prefetch" href="/assets/js/68.cc339c5a.js"><link rel="prefetch" href="/assets/js/69.2ff09789.js"><link rel="prefetch" href="/assets/js/7.3199f861.js"><link rel="prefetch" href="/assets/js/70.9d03d949.js"><link rel="prefetch" href="/assets/js/71.7eab78cd.js"><link rel="prefetch" href="/assets/js/72.20dd5f6e.js"><link rel="prefetch" href="/assets/js/73.6c6af6b0.js"><link rel="prefetch" href="/assets/js/74.8eed043b.js"><link rel="prefetch" href="/assets/js/75.3b5158cd.js"><link rel="prefetch" href="/assets/js/76.0eacd2d9.js"><link rel="prefetch" href="/assets/js/77.c3ba3709.js"><link rel="prefetch" href="/assets/js/78.843656e9.js"><link rel="prefetch" href="/assets/js/79.99bae0b9.js"><link rel="prefetch" href="/assets/js/8.8d4fcdde.js"><link rel="prefetch" href="/assets/js/80.4d3c67b0.js"><link rel="prefetch" href="/assets/js/81.85eaf0e7.js"><link rel="prefetch" href="/assets/js/82.27feb7aa.js"><link rel="prefetch" href="/assets/js/83.7686c618.js"><link rel="prefetch" href="/assets/js/84.941fa5d5.js"><link rel="prefetch" href="/assets/js/85.46a4182a.js"><link rel="prefetch" href="/assets/js/86.1d2fa06f.js"><link rel="prefetch" href="/assets/js/87.1fa71add.js"><link rel="prefetch" href="/assets/js/88.a9a069f0.js"><link rel="prefetch" href="/assets/js/9.99351bd6.js"><link rel="prefetch" href="/assets/js/90.029a12be.js"><link rel="prefetch" href="/assets/js/91.669f4475.js"><link rel="prefetch" href="/assets/js/92.686c84ef.js"><link rel="prefetch" href="/assets/js/93.47bd8585.js"><link rel="prefetch" href="/assets/js/94.0b908759.js"><link rel="prefetch" href="/assets/js/95.f4d85cb9.js"><link rel="prefetch" href="/assets/js/96.e57f6246.js"><link rel="prefetch" href="/assets/js/97.b5660771.js"><link rel="prefetch" href="/assets/js/98.91198c9e.js"><link rel="prefetch" href="/assets/js/99.9a6c1efc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.18cbf62c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">羊圈</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">blog</a></div><div class="nav-item"><a href="https://qishaoxuan.github.io/animate_resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  about me
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">blog</a></div><div class="nav-item"><a href="https://qishaoxuan.github.io/animate_resume/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  about me
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/1.基础知识.html" class="sidebar-link">基础知识</a></li><li><a href="/js/2.数据类型.html" class="sidebar-link">数据类型</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="正则表达式-regexp">正则表达式(RegExp)</h1> <h3 id="正则表达式">正则表达式</h3> <h3 id="regexp-构造函数">RegExp 构造函数</h3> <ol><li><p>参数是字符串，这时第二个参数表示正则表达式的修饰符（flag）。</p> <ol><li><div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">regExp</span><span class="token punctuation">(</span><span class="token string">'xyz'</span><span class="token punctuation">,</span><span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//等价于</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/xyz/i</span><span class="token punctuation">;</span>
</code></pre></div></li></ol></li> <li><p>参数是一个正则表达式，这时会返回一个原有正则表达式的拷贝。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex">/xyz/i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等价于</span>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/xyz/i</span><span class="token punctuation">;</span>
</code></pre></div><p>但是，ES5 不允许此时使用第二个参数添加修饰符，否则会报错。</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex">/xyz/</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Uncaught TypeError: Cannot supply flags when constructing one RegExp from another</span>
</code></pre></div><p>ES6 改变了这种行为。如果<code>RegExp</code>构造函数第一个参数是一个正则对象，那么可以使用第二个参数指定修饰符。而且，返回的正则表达式会忽略原有的正则表达式的修饰符，只使用新指定的修饰符。</p> <div class="language- extra-class"><pre class="language-text"><code>new RegExp(/abc/ig, 'i').flags
// &quot;i&quot;

</code></pre></div><p>上面代码中，原有正则对象的修饰符是<code>ig</code>，它会被第二个参数<code>i</code>覆盖。</p></li></ol> <h2 id="正则是啥？">正则是啥？</h2> <p>正则表达式(Regular Expression)是一种文本模式，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为&quot;元字符&quot;）。</p> <h2 id="元字符">元字符</h2> <p>\是转移字符，其后面的字符会代表不同的意思，转移字符主要有三个作用：</p> <p>第一种，是为了匹配不方便显示的特殊字符，比如换行，tab符号等</p> <p>第二种，正则中预先定义了一些代表特殊意义的字符，比如\w等</p> <p>第三种，在正则中某些字符有特殊含义(比如下面说到的)，转义字符可以让其显示自身的含义</p> <p>下面是常用转义字符列表：</p> <h3 id="常见元字符">常见元字符</h3> <ul><li>\d   匹配数字（0~9） '\d'匹配8,不匹配12</li> <li>\D   匹配非数字 '\D'匹配c,不匹配3</li> <li>\w   匹配一个字母或数字 '\w\w' 匹配A3,不匹配@3</li> <li>\W   匹配非单词字符 '\W'匹配@,不匹配c</li> <li>\s   匹配空白字符 '\d\s\d'匹配3 d,不匹配abc</li> <li>\S   匹配非空字符 '\S\S\S'匹配A#4,不匹配3 d</li> <li>\b   匹配单词边界</li> <li>\B   匹配非单词边界</li> <li>\n   匹配换行符</li> <li>\r   匹配回车符</li> <li>\t   匹配制表符(tab)</li> <li>.    匹配任意字符</li> <li>|    表示'或'</li> <li>()   优先级最低，表示分组</li></ul> <h3 id="字符类元字符">字符类元字符</h3> <ul><li>^    表示匹配必须由起始开始</li> <li>$    表示匹配必须由末尾结束</li> <li>[]   表达字符的位置，里面是可能出现的字符
<ul><li>[^]  是非的意思</li> <li>[a-z][1-9]表示范围</li></ul></li></ul> <h3 id="量词类元字符">量词类元字符</h3> <ul><li><code>*</code>表示能够出现0次或者更多次，x&gt;=0;</li> <li><code>+</code>表示能够出现1次或者多次，x&gt;=1</li> <li><code>?</code>表示能够出现0次或者1次，x=0或者x=1</li> <li><code>{n}</code>表示能够出现n次</li> <li><code>{n,}</code>表示能够出现n次或者n次以上</li> <li><code>{n,m}</code>表示能够出现n-m次</li></ul> <p>来看一个复杂的例子：\d{3}\s+\d{3,8}。我们来从左到右解读一下：</p> <ul><li>\d{3}表示匹配3个数字，例如'010'；</li> <li>\s可以匹配一个空格（也包括Tab等空白符），所以\s+表示至少有一个空格，例如匹配' '，'\t\t'等；</li> <li>\d{3,8}表示3-8个数字，例如'1234567'。</li></ul> <p>要做更精确地匹配，可以用<code>[]</code>表示范围，比如：</p> <ul><li><code>[0-9a-zA-Z\_]</code>：匹配一个数字、字母或者下划线；</li> <li><code>[0-9a-zA-Z\_]+</code>：匹配至少由一个数字、字母或者下划线组成的字符串，比如'a100'，'0_Z'，'js2015'等等；</li> <li><code>[a-zA-Z\_\$][0-9a-zA-Z\_\$]+</code>：匹配由字母或下划线、$开头，后接任意个由一个数字、字母或者下划线、$组成的字符串</li> <li><code>[a-zA-Z\_\$][0-9a-zA-Z\_\$]{0, 19}</code>：精确地限制了变量的长度是1-20个字符（前面1个字符+后面最多19个字符）。</li> <li><code>A|B</code>：可以匹配A或B</li> <li><code>^</code>：行的开头，<code>^\d</code>表示必须以数字开头。</li> <li><code>$</code>：表示行的结束，<code>\d$</code>表示必须以数字结束。</li></ul> <h3 id="javascript中的regexp">JavaScript中的RegExp</h3> <p>JavaScript有两种方式创建一个正则表达式：</p> <ul><li><code>/正则表达式/</code></li> <li><code>new RegExp('正则表达式')</code></li></ul> <p>注意：<code>new RegExp</code>方法中的“正则表达式”需要注意字符串的转义，如：</p> <p><code>/ABC\-001/</code>和<code>new RegExp('ABC\\-001')</code>实际上是相同的</p> <p>RegExp对象的test()方法用于测试给定的字符串是否符合条件：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex">/^\d{3}\-\d{3,8}$/</span><span class="token punctuation">;</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'010-12345'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'010-1234x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
re<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'010 12345'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div><h4 id="切分字符串">切分字符串</h4> <p><code>split()</code>方法：把一个字符串分割成字符串数组。</p> <p><code>stringObject.split(separator,howmany)</code></p> <p>separator：必需。字符串或正则表达式，从该参数指定的地方分割 stringObject。</p> <p>howmany：可选。该参数可指定返回的数组的最大长度。如果设置了该参数，返回的子串不会多于这个参数指定的数组。如果没有设置该参数，整个字符串都会被分割，不考虑它的长度。</p> <p>注：如果把空字符串 (&quot;&quot;) 用作 +separator+，那么 stringObject 中的每个字符之间都会被分割。</p> <h4 id="分组">分组</h4> <p><code>exec()</code> 方法：检索字符串中的正则表达式的匹配。或者在没有匹配项的情况下返回 null。返回的数组虽然是 Array 的实例，但包含两个额外的属性：index 和 input。其中，index 表示匹配项在字符串中的位置，而 input 表示应用正则表达式的字符串。</p> <p><code>RegExpObject.exec(string)</code></p> <p>如果 <code>exec()</code> 找到了匹配的文本，会返回一个Array，第一个元素始终是原始字符串本身，后面的字符串表示匹配成功的子串。。否则，返回 null。如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex">/^(\d{3})-(\d{3,8})$/</span><span class="token punctuation">;</span>
re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'010-12345'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['010-12345', '010', '12345']</span>
re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'010 12345'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null</span>
</code></pre></div><h4 id="贪婪匹配">贪婪匹配</h4> <p>正则匹配默认是贪婪匹配，也就是匹配尽可能多的字符。如：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex">/^(\d+)(0+)$/</span><span class="token punctuation">;</span>
re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'102300'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['102300', '102300', '']</span>
</code></pre></div><p>由于<code>\d+</code>采用贪婪匹配，直接把后面的0全部匹配了，结果0+只能匹配空字符串了。</p> <p>必须让<code>\d+</code>采用非贪婪匹配（也就是尽可能少匹配），才能把后面的0匹配出来，加个?就可以让\d+采用非贪婪匹配：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex">/^(\d+?)(0+)$/</span><span class="token punctuation">;</span>
re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'102300'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['102300', '1023', '00']</span>
</code></pre></div><h4 id="全局搜索">全局搜索</h4> <p>JavaScript的正则表达式还有几个特殊的标志，最常用的是g，表示全局匹配：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> r1 <span class="token operator">=</span> <span class="token regex">/test/g</span><span class="token punctuation">;</span>
<span class="token comment">// 等价于:</span>
<span class="token keyword">var</span> r2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>全局匹配可以多次执行exec()方法来搜索一个匹配的字符串。当我们指定g标志后，每次运行exec()，正则表达式本身会更新lastIndex属性，表示上次匹配到的最后索引：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'JavaScript, VBScript, JScript and ECMAScript'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> re<span class="token operator">=</span><span class="token regex">/[a-zA-Z]+Script/g</span><span class="token punctuation">;</span>

<span class="token comment">// 使用全局匹配:</span>
re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['JavaScript']</span>
re<span class="token punctuation">.</span>lastIndex<span class="token punctuation">;</span> <span class="token comment">// 10</span>

re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['VBScript']</span>
re<span class="token punctuation">.</span>lastIndex<span class="token punctuation">;</span> <span class="token comment">// 20</span>

re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['JScript']</span>
re<span class="token punctuation">.</span>lastIndex<span class="token punctuation">;</span> <span class="token comment">// 29</span>

re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['ECMAScript']</span>
re<span class="token punctuation">.</span>lastIndex<span class="token punctuation">;</span> <span class="token comment">// 44</span>

re<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null，直到结束仍没有匹配到</span>
</code></pre></div><p>全局匹配类似搜索，因此不能使用<code>/^...$/</code>，那样只会最多匹配一次。</p> <p><em>正则表达式还可以指定<code>i</code>标志，表示忽略大小写，<code>m</code>标志，表示执行多行匹配。</em></p> <h2 id="字符集和">字符集和</h2> <p>有时我们需要匹配一类字符，字符集可以实现这个功能，字符集的语法用[]分隔，下面的代码能够匹配a或b或c</p> <div class="language- extra-class"><pre class="language-text"><code>[abc]
</code></pre></div><p>如果要表示字符很多，可以使用-表示一个范围内的字符，下面两个功能相同</p> <div class="language- extra-class"><pre class="language-text"><code>[0123456789]
[0-9]
</code></pre></div><p>在前面添加^，可表示非的意思，下面的代码能够匹配abc之外的任意字符</p> <div class="language- extra-class"><pre class="language-text"><code>[^abc]
</code></pre></div><p>其实正则还内置了一些字符集，在上面的转义字符有提到，下面给出内置字符集对应的自定义字符集</p> <ul><li>. 匹配除了换行符（\n）以外的任意一个字符 = [^\n]</li> <li>\w = [0-9a-Z_]</li> <li>\W = [^0-9a-Z_]</li> <li>\s = [ \t\n\v]</li> <li>\S = [^ \t\n\v]</li> <li>\d = [0-9]</li> <li>\D = [^0-9]</li></ul> <h2 id="量词">量词</h2> <p>如果我们有三个苹果，我们可以说自己有个3个苹果，也可以说有一个苹果，一个苹果，一个苹果，每种语言都有量词的概念</p> <p>如果需要匹配多次某个字符，正则也提供了量词的功能，正则中的量词有多个，如?、+、*、{n}、{m,n}、{m,}</p> <p>{n}匹配n次，比如a{2}，匹配aa</p> <p>{m, n}匹配m-n次，优先匹配n次，比如a{1,3}，可以匹配aaa、aa、a</p> <p>{m,}匹配m-∞次，优先匹配∞次，比如a{1,}，可以匹配aaaa...</p> <p>?匹配0次或1次，优先匹配1次，相当于{0,1}</p> <p>+匹配1-n次，优先匹配n次，相当于{1,}</p> <p>*匹配0-n次，优先匹配n次，相当于{0,}</p> <p>正则默认和人心一样是贪婪的，也就是常说的贪婪模式，凡是表示范围的量词，都优先匹配上限而不是下限</p> <div class="language- extra-class"><pre class="language-text"><code>a{1, 3} // 匹配字符串'aaa'的话，会匹配aaa而不是a
</code></pre></div><p>有时候这不是我们想要的结果，可以在量词后面加上?，就可以开启非贪婪模式</p> <div class="language- extra-class"><pre class="language-text"><code>a{1, 3}? // 匹配字符串'aaa'的话，会匹配a而不是aaa
</code></pre></div><h2 id="字符边界">字符边界</h2> <p>有时我们会有边界的匹配要求，比如已xxx开头，已xxx结尾</p> <p>^在[]外表示匹配开头的意思</p> <div class="language- extra-class"><pre class="language-text"><code>^abc // 可以匹配abc，但是不能匹配aabc
</code></pre></div><p>$表示匹配结尾的意思</p> <div class="language- extra-class"><pre class="language-text"><code>abc$ // 可以匹配abc，但是不能匹配abcc
</code></pre></div><p>上面提到的\b表示单词的边界</p> <div class="language- extra-class"><pre class="language-text"><code>abc\b // 可以匹配 abc ，但是不能匹配 abcc
</code></pre></div><h2 id="选择表达式">选择表达式</h2> <p>有时我们想匹配x或者y，如果x和y是单个字符，可以使用字符集，[abc]可以匹配a或b或c，如果x和y是多个字符，字符集就无能为力了，此时就要用到分组</p> <p>正则中用|来表示分组，a|b表示匹配a或者b的意思</p> <div class="language- extra-class"><pre class="language-text"><code>123|456|789 // 匹配 123 或 456 或 789
</code></pre></div><h2 id="分组与引用">分组与引用</h2> <p>分组是正则中非常强大的一个功能，可以让上面提到的量词作用于一组字符，而非单个字符，分组的语法是圆括号包裹(xxx)</p> <div class="language- extra-class"><pre class="language-text"><code>(abc){2} // 匹配abcabc
</code></pre></div><p>分组不能放在[]中，分组中还可以使用选择表达式</p> <div class="language- extra-class"><pre class="language-text"><code>(123|456){2} // 匹配 123123、456456、123456、456123
</code></pre></div><p>和分组相关的概念还有一个捕获分组和非捕获分组，分组默认都是捕获的，在分组的(后面添加?:可以让分组变为非捕获分组，非捕获分组可以提高性能和简化逻辑</p> <div class="language- extra-class"><pre class="language-text"><code>'123'.match(/(?123)/) // 返回 ['123']
'123'.match(/(123)/)  // 返回 ['123', '123']
</code></pre></div><p>和分组相关的另一个概念是引用，比如在匹配html标签时，通常希望<xxx></xxx>后面的xxx能够和前面保持一致</p> <p>引用的语法是\数字，数字代表引用前面第几个捕获分组，注意非捕获分组不能被引用</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;([a-z]+)&gt;&lt;\/\1&gt; // 可以匹配 `&lt;span&gt;&lt;/span&gt;` 或 `&lt;div&gt;&lt;/div&gt;`等
</code></pre></div><h2 id="预搜索">预搜索</h2> <p>如果你想匹配xxx前不能是yyy，或者xxx后不能是yyy，那就要用到预搜索</p> <p>js只支持先行预搜索，也就是xxx前面必须是yyy，或者xxx前面不能是yyy</p> <div class="language- extra-class"><pre class="language-text"><code>(?=1)2 // 可以匹配12，不能匹配22
(?!1)2 // 可有匹配22，不能匹配12
</code></pre></div><h2 id="修饰符">修饰符</h2> <p>默认正则是区分大小写，这可能并不是我们想要的，正则提供了修饰符的功能，修复的语法如下</p> <div class="language- extra-class"><pre class="language-text"><code>/xxx/gi // 最后面的g和i就是两个修饰符
</code></pre></div><p>g正则遇到第一个匹配的字符就会结束，加上全局修复符，可以让其匹配到结束</p> <p>i正则默认是区分大小写的，i可以忽略大小写</p> <p>m正则默认遇到换行符就结束了，不能匹配多行文本，m可以让其匹配多行文本</p> <p>有时我们会遇到特别负责的正则，有时候可能不太只管，下面推荐一个图形化展示的<a href="https://link.zhihu.com/?target=https%3A//jex.im/regulex" target="_blank" rel="noopener noreferrer">工具<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，我们把涉及到的语法罗列一下</p> <div class="language- extra-class"><pre class="language-text"><code>/^[a-z]*[^\d]{1,10}?(aaa|bbb)(?:ccc)$/
</code></pre></div><p>在js中创建正则有两种办法，字面量和new，和创建其他类型变量一样</p> <div class="language- extra-class"><pre class="language-text"><code>var reg = /abc/g // 字面量
var reg = new RegExp('abc', 'g') // new方式，意思和上面一样
</code></pre></div><p>js中用到正则的地方有两个入口，正则的api和字符串的api，<code>RegExp#test</code>等于<code>RegExp.prototype.test</code></p> <ul><li>RegExp#test</li> <li>RegExp#exec</li> <li>String#search</li> <li>String#match</li> <li>String#split</li> <li>String#replace</li></ul> <h2 id="regexp-test">RegExp#test</h2> <p>每个正则实例都有test方法，test的参数是字符串，返回值是布尔值，表示当前正则是否能匹配指定的字符串</p> <div class="language- extra-class"><pre class="language-text"><code>/abc/.test('abc') // true
/abc/.test('abd') // false
</code></pre></div><h2 id="regexp-exec">RegExp#exec</h2> <p>exec使用方法和test一样，只是返回值并不是布尔值，而是返回匹配的结果</p> <p>匹配成功返回一个数组，数组第一项是匹配结果，后面一次是捕获的分组</p> <div class="language- extra-class"><pre class="language-text"><code>/abc(d)/.exec('abcd') // [&quot;abcd&quot;, &quot;d&quot;, index: 0, input: &quot;abcd&quot;]
</code></pre></div><p>此数组还有另外两个参数，input是输入的字符串，index表示匹配成功的序列在输入字符串中的索引位置</p> <p>如果有全局参数(g)，第二次匹配时将从上次匹配结束时继续</p> <div class="language- extra-class"><pre class="language-text"><code>var r1 = /ab/
r1.exec('ababab') // ['ab', index: 0]
r1.exec('ababab') // ['ab', index: 0]

var r2 = /ab/g
r2.exec('ababab') // ['ab', index: 0]
r2.exec('ababab') // ['ab', index: 2]
r2.exec('ababab') // ['ab', index: 4]
</code></pre></div><p>这一特性可以被用于循环匹配，比如统计字符串中abc的次数</p> <div class="language- extra-class"><pre class="language-text"><code>var reg = /abc/g
var str = 'abcabcabcabcabc'
var num = 0;
var match = null;
while((match = reg.exec(str)) !== null) {
    num++
}
console.log(num) // 5
</code></pre></div><p>如果匹配失败则返回null</p> <div class="language- extra-class"><pre class="language-text"><code>/abc(d)/.exec('abc') // null
</code></pre></div><h2 id="string-search">String#search</h2> <p>search方法返回匹配成功位置的索引，参数是字符串或正则，结果是索引</p> <div class="language- extra-class"><pre class="language-text"><code>'abc'.search(/abc/) // 0
'abc'.search(/c/) // 2
</code></pre></div><p>如果匹配失败则返回-1</p> <div class="language- extra-class"><pre class="language-text"><code>'abc'.search(/d/) // -1

'abc'.search(/d/) !== -1 // false 转换为布尔值
</code></pre></div><h2 id="string-match">String#match</h2> <p>match方法也会返回匹配的结果，匹配结果和exec类似</p> <div class="language- extra-class"><pre class="language-text"><code>'abc'.match(/abc/) // ['abc', index: 0, input: abc]
'abc'.match(/abd/) // null
</code></pre></div><p>如果有全局参数(g)，match会返回所有的结果，并且没有index和input属性</p> <div class="language- extra-class"><pre class="language-text"><code>'abcabcabc'.match(/abc/g) // ['abc', 'abc', 'abc']
</code></pre></div><h2 id="string-split">String#split</h2> <p>字符串的split方法，可以用指定符号分隔字符串，并返回数据</p> <div class="language- extra-class"><pre class="language-text"><code>'a,b,c'.split(',') // [a, b, c]
</code></pre></div><p>其参数也可以使一个正则，如果分隔符有多个时，就必须使用正则</p> <div class="language- extra-class"><pre class="language-text"><code>'a,b.c'.split(/,|\./) // [a, b, c]
</code></pre></div><h2 id="string-replace">String#replace</h2> <p>字符串的replace方法，可以将字符串的匹配字符，替换成另外的指定字符</p> <div class="language- extra-class"><pre class="language-text"><code>'abc'.replace('a', 'b') // 'bbc'
</code></pre></div><p>其第一个参数可以是正则表达式，如果想全局替换需添加全局参数</p> <div class="language- extra-class"><pre class="language-text"><code>'abc'.replace(/[abc]/, 'y') // ybc
'abc'.replace(/[abc]/g, 'y') // yyy 全局替换
</code></pre></div><p>在第二个参数中，也可以引用前面匹配的结果</p> <div class="language- extra-class"><pre class="language-text"><code>'abc'.replace(/a/, '$&amp;b') // abbc $&amp; 引用前面的匹配字符
'abc'.replace(/(a)b/, '$1a') // aac &amp;n 引用前面匹配字符的分组
'abc'.replace(/b/, '$\'') // aac $` 引用匹配字符前面的字符
'abc'.replace(/b/, &quot;$'&quot;) // acc $' 引用匹配字符后面的字符
</code></pre></div><p>replace的第二个参数也可以是函数，其第一个参数是匹配内容，后面的参数是匹配的分组</p> <div class="language- extra-class"><pre class="language-text"><code>'abc'.replace(/\w/g, function (match, $1, $2) {
    return match + '-'
})
// a-b-c-
</code></pre></div><h2 id="regexp">RegExp</h2> <p>RegExp是一个全局函数，可以用来创建动态正则，其自身也有一些属性</p> <ul><li>$_</li> <li>$n</li> <li>input</li> <li>length</li> <li>lastMatch</li></ul> <p>来个例子</p> <div class="language- extra-class"><pre class="language-text"><code>/a(b)/.exec('abc') // [&quot;ab&quot;, &quot;b&quot;, index: 0, input: &quot;abc&quot;]

RegExp.$_ // abc 上一次匹配的字符串
RegExp.$1 // b 上一次匹配的捕获分组
RegExp.input // abc 上一次匹配的字符串
RegExp.lastMatch // ab 上一次匹配成功的字符
RegExp.length // 2 上一次匹配的数组长度
</code></pre></div><h2 id="实例属性">实例属性</h2> <p>正则表达式的实例上也有一些属性</p> <ul><li>flags</li> <li>ignoreCase</li> <li>global</li> <li>multiline</li> <li>source</li> <li>lastIndex</li></ul> <p>还是看例子</p> <div class="language- extra-class"><pre class="language-text"><code>var r = /abc/igm;

r.flags // igm
r.ignoreCase // true
r.global // true
r.multiline // true
r.source // abc
</code></pre></div><p>lastIndex比较有意思，表示上次匹配成功的是的索引</p> <div class="language- extra-class"><pre class="language-text"><code>var r = /abc/igm;
r.exec('abcabcabc')
r.lastIndex // 3

r.exec('abcabcabc')
r.lastIndex // 6
</code></pre></div><p>可以更改lastIndex让其重新开始</p> <div class="language- extra-class"><pre class="language-text"><code>var r = /abc/igm;
r.exec('abcabcabc') // [&quot;abc&quot;, index: 0]

r.exec('abcabcabc') // [&quot;abc&quot;, index: 3]
r.lastIndex = 0
r.exec('abcabcabc') // [&quot;abc&quot;, index: 0]
</code></pre></div><h2 id="实战实例">实战实例</h2> <p>来几个常用的例子</p> <div class="language- extra-class"><pre class="language-text"><code>/(?:0\d{2,3}-)?\d{7}/ // 电话号 010-xxx xxx

/^1[378]\d{9}$/ // 手机号 13xxx 17xxx 18xxx

/^[0-9a-zA-Z_]+@[0-9a-zA-Z]+\.[z-z]+$/ // 邮箱
</code></pre></div><p>去除字符串前后空白</p> <div class="language- extra-class"><pre class="language-text"><code>str = str.replace(/^\s*|\s*$/g, '')
</code></pre></div><h2 id="总结">总结</h2> <p>到这里你已经学会了正则的语法，并且学会了在js中使用正则的方法，接下来快去实战吧，要想学会正则必须多加练习，正所谓拳不离手曲不离口吗</p> <p>在<a href="http://yanhaijing.com/javascript/2017/11/29/regexp-principle/" target="_blank" rel="noopener noreferrer">下一篇文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>中，准备讲一讲正则的实现原理，难度略大o(╯□╰)o</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><div class="cat-container" data-v-a13867c0><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-a13867c0></canvas></div></div></div>
    <script src="/assets/js/app.c1618cf4.js" defer></script><script src="/assets/js/3.ed1bf183.js" defer></script><script src="/assets/js/89.93d73858.js" defer></script>
  </body>
</html>
