# 简介

## AST 基本结构

AST 由很多 node 组成，每个node的结构类似：

```js
{
  type: String,
  id: Object,
  params: ,
  body: 
}
```

node的公共 interface：

```js
interface Node {
  type: string;
}
```

- type：字符串，代表当前 node 的类型
  - FunctionDeclaration
  - Identifier
  - BinaryExpression
  - CommentLine
  - File
  - Program

### babel 生成的AST结构

babel的AST node会多一些描述源码位置的额外属性（start、end、loc）

```js
{
  type: ...,
  start: 0, // 代码开始位置，换行符算1位置
  end: 38, // 代码结束位置
  loc: {
    start: {
      line: 1,
      column: 0
    },
    end: {
      line: 3,
      column: 1
    }
  },
  ...
}
```

## 步骤

### Parse

将源码转换成AST。babel会进行词法分析（[Lexical Analysis](https://en.wikipedia.org/wiki/Lexical_analysis) )和语法分析([Syntactic Analysis](https://en.wikipedia.org/wiki/Parsing)) 两个步骤。

词法分析将代码token化，语法分析将代码tokens流转化成AST表述。最终的AST可以代表源代码的结构。

### Transform

遍历AST时添加、更新、删除AST 节点。这是大部分编译器中最复杂的部分。babel插件的在此过程中生效。

#### Traversal



### Generate

将AST转换回代码，并生成 [source maps](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)。

